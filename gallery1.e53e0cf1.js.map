{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,iEAQA,MAEMC,EAAO,CACTC,WAAYC,SAASC,cAAc,gBACnCC,MAAOF,SAASC,cAAc,uBAC9BE,iBAAkBH,SAASC,cAAc,aAIvCG,EAAc,IAAI,EAAAC,EAAAC,SAAO,CAAEC,SAAU,aAAcC,QAAQ,EAAMC,KAAM,cACvEC,EAAY,IAAI,EAAAL,EAAAC,SAAO,CAAEC,SAAU,uBAAwBC,QAAQ,EAAOC,KAAM,WAmCtF,SAASE,EAAkBC,GACvB,GAA0B,IAAtBA,EAAMC,KAAKC,OAEX,YADAlB,EAAAU,QAASS,MAAM,4EAMnB,GAFAjB,EAAKK,iBAAiBa,mBAAmB,aAAa,EAAAC,EAAAX,SAAOM,EAAMC,OAE/DK,EAAAZ,QAAgBa,WAAa,EAAG,CAE+C,MAAvEC,OAAQC,GAAevB,EAAKK,iBAAiBmB,kBAAkBC,wBACvEC,OAAOC,SAAS,CACZC,IAAkB,EAAbL,EACLM,SAAU,U,CAIlBvB,EAAYwB,OACZxB,EAAYyB,YAAa,aAK1B,GAHiB,IAAIC,EAAAC,GAAJ,CAAmB,cAC3BC,UAELd,EAAAZ,QAAgB2B,cAAgBrB,EAAMsB,UAGtC,OAFAtC,EAAAU,QAAS6B,KAAK,oEAAoEvB,EAAMsB,oBACxF9B,EAAYgC,OAGfxC,EAAAU,QAAS+B,QAAQ,WAAWnB,EAAAZ,QAAgB2B,mCAAmCrB,EAAMsB,c,CA7DzFpC,EAAKC,WAAWuC,iBAAiB,UAKjC,SAAwBC,GAKI,GAJxBA,EAAMC,iBACsB1C,EAAvBK,iBAAiBsC,UAAY,GACRrC,EAAdgC,OACZlB,EAAAZ,QAAgBoC,MAAQH,EAAMI,cAAcC,SAASC,YAAYC,MAAMC,OACzC,KAA1B7B,EAAAZ,QAAgBoC,MAEhB,YADA9C,EAAAU,QAAS0C,QAAQ,iCAGrB9B,EAAAZ,QAAgB2C,YAChB/B,EAAAZ,QAAgB4C,mBAEhBhC,EAAAZ,QAAgB6C,aACXC,KAAKzC,GACL0C,QAAQvD,EAAKC,WAAWuD,QACjB5C,EAAU6C,W,IAnB1BnD,EAAYoD,OAAOlB,iBAAiB,SAwBpC,WAEIlC,EAAYyB,YAAa,cACzBX,EAAAZ,QAAgB6C,aAAaC,KAAKzC,E,IA1BtCb,EAAKI,MAAMoC,iBAAiB,QAASR,EAAA2B,EAAA,EAAU,IAAM/C,EAAUgD,UAdxC","sources":["src/js/gallery1.js"],"sourcesContent":["import notifier from './service/notifler'\nimport markup from './markup'; \nimport photoApiService from './PhotoApiService';\nimport NewBtn from './service/newbutton';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nimport debounce from 'lodash.debounce';\n\nconst DEBOUNCE_DELAY = 300;\n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    input: document.querySelector('.search-form__input'),\n    galleryContainer: document.querySelector('.gallery'),\n          \n};\n\nconst loadMoreBtn = new NewBtn({ selector: '.load-more', hidden: true, text: 'Load-more' });\nconst searchBtn = new NewBtn({ selector: '.search-form__button', hidden: false, text: 'Search' });\n\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.button.addEventListener('click', onLoadMoreClick);\nrefs.input.addEventListener('input', debounce((() => searchBtn.enable()), DEBOUNCE_DELAY) );\n\n\nfunction onSearchSubmit(event) {\n    event.preventDefault(); // прибираємо дефолтову поведінку\n    refs.galleryContainer.innerHTML = ''; // стартово прибираємо розмітку\n    loadMoreBtn.hide();\n    photoApiService.query = event.currentTarget.elements.searchQuery.value.trim(); //trim прибираються зайві пробіли\n    if (photoApiService.query === '') { // перевіряємо чи взагалі щось введено \n        notifier.warning(\"No request. Please try again.\")\n        return;\n    }\n    photoApiService.resetPage();\n    photoApiService.resetViewedPhoto();\n\n    photoApiService.fetchPhoto()\n        .then(appendPhotoMarkUp)\n        .finally(refs.searchForm.reset(),\n                searchBtn.disabled()\n                );\n    \n}\n    \nfunction onLoadMoreClick() {\n    \n    loadMoreBtn.textContent ('Loading...');\n    photoApiService.fetchPhoto().then(appendPhotoMarkUp);\n      \n     \n};\n\nfunction appendPhotoMarkUp(photo) {\n    if (photo.hits.length === 0) { // перевіряємо чи щось знайдено \n        notifier.error(\"Sorry, there are no images matching your search query. Please try again.\")\n        return;\n    }\n    \n    refs.galleryContainer.insertAdjacentHTML('beforeend', markup(photo.hits));  \n\n    if (photoApiService.pageNumber > 2) {\n        //   плавне прокручування сторінки після запиту і відтворення кожної наступної групи зображень\n        const { height: cardHeight } = refs.galleryContainer.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    }\n\n    loadMoreBtn.show();\n    loadMoreBtn.textContent ('Load more');   \n    \n    const gallery = new SimpleLightbox('.gallery a'); // створюємо модалку і передаємо велику картинку\n    gallery.refresh(); // Refresh Imag\n    \n   if (photoApiService.viewedPhoto === photo.totalHits) {\n       notifier.info(`We're sorry, but you've reached the end of search results. Total ${photo.totalHits}. `);\n       loadMoreBtn.hide();\n       return;\n    }\n    notifier.success(`Hooray! ${photoApiService.viewedPhoto} images for you from ${photo.totalHits} !`);\n}\n    //   плавне прокручування сторінки до кінця після запиту і відтворення кожної наступної групи зображень\n    // refs.galleryContainer.scrollIntoView({\n    // behavior: 'smooth',\n    // block: 'end',\n    // }); \n\n    \n    \n\n        \n       \n\n        \n\n"],"names":["$cNM6c","parcelRequire","$1d912b2854b26a87$var$refs","searchForm","document","querySelector","input","galleryContainer","$1d912b2854b26a87$var$loadMoreBtn","$dwE1g","default","selector","hidden","text","$1d912b2854b26a87$var$searchBtn","$1d912b2854b26a87$var$appendPhotoMarkUp","photo","hits","length","error","insertAdjacentHTML","$3huUq","$fxhcZ","pageNumber","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","show","textContent","$parcel$interopDefault","$fZKcF","refresh","viewedPhoto","totalHits","info","hide","success","addEventListener","event","preventDefault","innerHTML","query","currentTarget","elements","searchQuery","value","trim","warning","resetPage","resetViewedPhoto","fetchPhoto","then","finally","reset","disabled","button","$50Kfe","enable"],"version":3,"file":"gallery1.e53e0cf1.js.map"}