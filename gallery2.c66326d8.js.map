{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,8EAUAC,EAAAC,GAAIC,OAEJ,MAEMC,EAAO,CACTC,WAAYC,SAASC,cAAc,gBACnCC,MAAOF,SAASC,cAAc,uBAC9BE,iBAAkBH,SAASC,cAAc,YACzCG,YAAaJ,SAASC,cAAc,eAIlCI,EAAU,IAAIV,EAAAW,GAAJ,CAAmB,cAC7BC,EAAY,IAAI,EAAAC,EAAAC,SAAO,CAAEC,SAAU,uBAAwBC,QAAQ,EAAOC,KAAM,WAChFC,EAAW,IAAIC,sBAAsBC,IACvC,IAAK,MAAMC,KAASD,EACZC,EAAMC,gBAAkBC,EAAAT,QAAgBU,WAAa,GACrDD,EAAAT,QAAgBW,aAAaC,KAAKC,EAAkB,GAG7D,CAAEC,WAAY,UA4BjB,SAASD,EAAkBE,GAEvB,GAA0B,IAAtBA,EAAMC,KAAKC,OAShB,OAJC5B,EAAKK,iBAAiBwB,mBAAmB,YAAoBH,EAAMC,KAa/CG,KAAI,EAACC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,MAC9E,EAAAC,EAAA3B,SAAW,C,aAAEoB,E,cAAcC,E,KAAeC,E,MAAMC,E,MAAOC,E,SAAOC,E,UAAUC,MAAcE,KAAK,KAbnGhC,EAAQiC,UACR7C,EAAAgB,QAAS8B,QAAQ,WAAWrB,EAAAT,QAAgB+B,mCAAmChB,EAAMiB,eAElFvB,EAAAT,QAAgB+B,aAAehB,EAAMiB,WACrChD,EAAAgB,QAASiC,QAAQ,oEAAoElB,EAAMiB,oBAC3F5B,EAAS8B,mBAFb,EARKlD,EAAAgB,QAASiC,QAAQ,2E,CAqBzB,SAASE,EAAWC,GAEZ,MADApD,EAAAgB,QAASoC,MAAM,0CACT,IAAIC,MAAMC,QAAQC,IAAIH,G,CApDpC/C,EAAKC,WAAWkD,iBAAiB,UAIjC,SAAwBC,GAII,GAHxBA,EAAMC,iBACsBrD,EAAvBK,iBAAiBiD,UAAY,GAClClC,EAAAT,QAAgB4C,MAAQH,EAAMI,cAAcC,SAASC,YAAYC,MAAMC,OACzC,KAA1BxC,EAAAT,QAAgB4C,MAEhB,YADA5D,EAAAgB,QAASkD,KAAK,iCAGlBzC,EAAAT,QAAgBmD,YAChB1C,EAAAT,QAAgBoD,mBAEhB3C,EAAAT,QAAgBW,aACXC,KAAKC,GACLwC,MAAMlB,GACNmB,QAAQjE,EAAKC,WAAWiE,QACjBzD,EAAU0D,YAGtBpD,EAASqD,QAAQpE,EAAKM,Y,IArB1BN,EAAKI,MAAM+C,iBAAiB,QAAStD,EAAAwE,EAAA,EAAU,IAAM5D,EAAU6D,UArBxC","sources":["src/js/gallery2.js"],"sourcesContent":["import notifier from './service/notifler'\nimport photoApiService from './PhotoApiService';\nimport NewBtn from './service/newbutton';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nimport debounce from 'lodash.debounce';\nimport AOS from 'aos';\nimport 'aos/dist/aos.css';\nimport markupTpl from '../templates/markupAOS.hbs';\n\nAOS.init();\n\nconst DEBOUNCE_DELAY = 300;\n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    input: document.querySelector('.search-form__input'),\n    galleryContainer: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n          \n};\n\nconst gallery = new SimpleLightbox('.gallery a'); // створюємо модалку і передаємо велику картинку\nconst searchBtn = new NewBtn({ selector: '.search-form__button', hidden: false, text: 'Search' });\nconst observer = new IntersectionObserver((entries) => { \n    for (const entry of entries) {\n        if (entry.isIntersecting && photoApiService.pageNumber > 1) {\n            photoApiService.fetchPhoto().then(appendPhotoMarkUp);\n        }\n    }\n}, { rootMargin: '400px' });\n\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\nrefs.input.addEventListener('input', debounce((() => searchBtn.enable()), DEBOUNCE_DELAY) );\n\n\nfunction onSearchSubmit(event) {\n    event.preventDefault(); // прибираємо дефолтову поведінку\n    refs.galleryContainer.innerHTML = ''; // стартово прибираємо розмітку\n    photoApiService.query = event.currentTarget.elements.searchQuery.value.trim(); //trim прибираються зайві пробіли\n    if (photoApiService.query === '') { // перевіряємо чи взагалі щось введено \n        notifier.info(\"No request. Please try again.\")\n        return;\n    }\n    photoApiService.resetPage();\n    photoApiService.resetViewedPhoto();\n\n    photoApiService.fetchPhoto()\n        .then(appendPhotoMarkUp)\n        .catch(catchError)\n        .finally(refs.searchForm.reset(),\n                searchBtn.disabled()\n    );\n    \n    observer.observe(refs.loadMoreBtn); // вішаємо обзервер для можливості скролу \n}\n    \n\nfunction appendPhotoMarkUp(photo) {\n       \n    if (photo.hits.length === 0) { // перевіряємо чи щось знайдено \n        notifier.warning(\"Sorry, there are no images matching your search query. Please try again.\")\n        return;\n    }\n    \n    refs.galleryContainer.insertAdjacentHTML('beforeend', markup(photo.hits));  \n    gallery.refresh(); // Refresh Imag\n    notifier.success(`Hooray! ${photoApiService.viewedPhoto} images for you from ${photo.totalHits} !`);\n    \n   if (photoApiService.viewedPhoto >= photo.totalHits) {\n       notifier.warning(`We're sorry, but you've reached the end of search results. Total ${photo.totalHits}. `);\n       observer.disconnect(); // знімаємо обзервер, так як показали все\n       return;\n    }\n    \n}\n    \nfunction markup(galleryItems) {\n    return galleryItems.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n            markupTpl ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads })).join('');\n};\n    \nfunction catchError(error) {\n        notifier.error('Something went wrong. Please try later');\n        throw new Error(console.log(error));\n    \n    }\n\n        \n       \n\n        \n\n"],"names":["$cNM6c","parcelRequire","$parcel$interopDefault","$lL5zp","init","$5b6cb498bd77ff28$var$refs","searchForm","document","querySelector","input","galleryContainer","loadMoreBtn","$5b6cb498bd77ff28$var$gallery","$fZKcF","$5b6cb498bd77ff28$var$searchBtn","$dwE1g","default","selector","hidden","text","$5b6cb498bd77ff28$var$observer","IntersectionObserver","entries","entry","isIntersecting","$fxhcZ","pageNumber","fetchPhoto","then","$5b6cb498bd77ff28$var$appendPhotoMarkUp","rootMargin","photo","hits","length","insertAdjacentHTML","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$aPInm","join","refresh","success","viewedPhoto","totalHits","warning","disconnect","$5b6cb498bd77ff28$var$catchError","error","Error","console","log","addEventListener","event","preventDefault","innerHTML","query","currentTarget","elements","searchQuery","value","trim","info","resetPage","resetViewedPhoto","catch","finally","reset","disabled","observe","$50Kfe","enable"],"version":3,"file":"gallery2.c66326d8.js.map"}