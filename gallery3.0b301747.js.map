{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAQA,MAEMC,EAAO,CACTC,WAAYC,SAASC,cAAc,gBACnCC,MAAOF,SAASC,cAAc,uBAC9BE,iBAAkBH,SAASC,cAAc,aAIvCG,EAAc,IAAI,EAAAC,EAAAC,SAAO,CAAEC,SAAU,aAAcC,QAAQ,EAAMC,KAAM,cACvEC,EAAY,IAAI,EAAAL,EAAAC,SAAO,CAAEC,SAAU,uBAAwBC,QAAQ,EAAOC,KAAM,WAChFE,EAAU,IAAIC,EAAAC,GAAJ,CAAmB,cAoCnC,SAASC,EAAkBC,GACvB,GAA0B,IAAtBA,EAAMC,KAAKC,OAAf,CAWA,GANAnB,EAAKK,iBAAiBe,mBAAmB,aAAa,EAAAC,EAAAb,SAAOS,EAAMC,OACnEL,EAAQS,UACRhB,EAAYiB,OACGjB,EAAHkB,YAAY,aACxB1B,EAAAU,QAASiB,QAAQ,WAAWC,EAAAlB,QAAgBmB,mCAAmCV,EAAMW,eAEjFF,EAAAlB,QAAgBqB,WAAa,EAAG,CAE+C,MAAvEC,OAAQC,GAAe/B,EAAKK,iBAAiB2B,kBAAkBC,wBACvEC,OAAOC,SAAS,CACZC,IAAkB,EAAbL,EACLM,SAAU,U,CAInB,OAAIX,EAAAlB,QAAgBmB,aAAeV,EAAMW,WACrC9B,EAAAU,QAAS8B,KAAK,oEAAoErB,EAAMW,oBACxFtB,EAAYiC,aAFhB,C,CAnBKzC,EAAAU,QAASgC,MAAM,2E,CA2BvB,SAASC,EAAWD,GAEZ,MADA1C,EAAAU,QAASgC,MAAM,0CACT,IAAIE,MAAMC,QAAQC,IAAIJ,G,CAjEIxC,EAAnCC,WAAW4C,iBAAiB,UAKjC,SAAwBC,GAKI,GAJxBA,EAAMC,iBACsB/C,EAAvBK,iBAAiB2C,UAAY,GACR1C,EAAdiC,OACZb,EAAAlB,QAAgByC,MAAQH,EAAMI,cAAcC,SAASC,YAAYC,MAAMC,OACzC,KAA1B5B,EAAAlB,QAAgByC,MAEhB,YADAnD,EAAAU,QAAS+C,QAAQ,iCAGrB7B,EAAAlB,QAAgBgD,YAChB9B,EAAAlB,QAAgBiD,mBAEhB/B,EAAAlB,QAAgBkD,aACXC,KAAK3C,GACL4C,MAAMnB,GACNoB,QAAQ7D,EAAKC,WAAW6D,QACjBlD,EAAUmD,W,IApB1BzD,EAAY0D,OAAOnB,iBAAiB,SAyBpC,WAEIvC,EAAYkB,YAAa,cACzBE,EAAAlB,QAAgBkD,aAAaC,KAAK3C,GAAmB4C,MAAMnB,E,IA3B/DzC,EAAKI,MAAMyC,iBAAiB,QAAS/B,EAAAmD,EAAA,EAAU,IAAMrD,EAAUsD,UAfxC,K","sources":["src/js/gallery3.js"],"sourcesContent":["import notifier from './service/notifler'\nimport markup from './markup'; \nimport photoApiService from './PhotoApiService';\nimport NewBtn from './service/newbutton';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nimport debounce from 'lodash.debounce';\n\nconst DEBOUNCE_DELAY = 300;\n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    input: document.querySelector('.search-form__input'),\n    galleryContainer: document.querySelector('.gallery'),\n          \n};\n\nconst loadMoreBtn = new NewBtn({ selector: '.load-more', hidden: true, text: 'Load-more' });\nconst searchBtn = new NewBtn({ selector: '.search-form__button', hidden: false, text: 'Search' });\nconst gallery = new SimpleLightbox('.gallery a'); // створюємо модалку і передаємо велику картинку\n\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.button.addEventListener('click', onLoadMoreClick);\nrefs.input.addEventListener('input', debounce((() => searchBtn.enable()), DEBOUNCE_DELAY) );\n\n\nfunction onSearchSubmit(event) {\n    event.preventDefault(); // прибираємо дефолтову поведінку\n    refs.galleryContainer.innerHTML = ''; // стартово прибираємо розмітку\n    loadMoreBtn.hide();\n    photoApiService.query = event.currentTarget.elements.searchQuery.value.trim(); //trim прибираються зайві пробіли\n    if (photoApiService.query === '') { // перевіряємо чи взагалі щось введено \n        notifier.warning(\"No request. Please try again.\")\n        return;\n    }\n    photoApiService.resetPage();\n    photoApiService.resetViewedPhoto();\n\n    photoApiService.fetchPhoto()\n        .then(appendPhotoMarkUp)\n        .catch(catchError)\n        .finally(refs.searchForm.reset(),\n                searchBtn.disabled()\n                );\n    \n}\n    \nfunction onLoadMoreClick() {\n    \n    loadMoreBtn.textContent ('Loading...');\n    photoApiService.fetchPhoto().then(appendPhotoMarkUp).catch(catchError);\n      \n     \n};\n\nfunction appendPhotoMarkUp(photo) {\n    if (photo.hits.length === 0) { // перевіряємо чи щось знайдено \n        notifier.error(\"Sorry, there are no images matching your search query. Please try again.\")\n        return;\n    }\n    \n    refs.galleryContainer.insertAdjacentHTML('beforeend', markup(photo.hits));\n    gallery.refresh(); // Refresh Imag\n    loadMoreBtn.show(); // Показуємо кнопку loadMore\n    loadMoreBtn.textContent('Load more');  \n    notifier.success(`Hooray! ${photoApiService.viewedPhoto} images for you from ${photo.totalHits} !`);\n\n    if (photoApiService.pageNumber > 2) {\n        //   плавне прокручування сторінки після запиту і відтворення кожної наступної групи зображень\n        const { height: cardHeight } = refs.galleryContainer.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    }\n      \n   if (photoApiService.viewedPhoto >= photo.totalHits) {\n       notifier.info(`We're sorry, but you've reached the end of search results. Total ${photo.totalHits}. `);\n       loadMoreBtn.hide();\n       return;\n    }  \n     \n}\n\nfunction catchError(error) {\n        notifier.error('Something went wrong. Please try later');\n        throw new Error(console.log(error));\n    \n    }\n    //   плавне прокручування сторінки до кінця після запиту і відтворення кожної наступної групи зображень\n    // refs.galleryContainer.scrollIntoView({\n    // behavior: 'smooth',\n    // block: 'end',\n    // }); \n\n    \n    \n\n        \n       \n\n        \n\n"],"names":["$hzery","parcelRequire","$2c81a8fded229245$var$refs","searchForm","document","querySelector","input","galleryContainer","$2c81a8fded229245$var$loadMoreBtn","$co4Ad","default","selector","hidden","text","$2c81a8fded229245$var$searchBtn","$2c81a8fded229245$var$gallery","$parcel$interopDefault","$5IjG7","$2c81a8fded229245$var$appendPhotoMarkUp","photo","hits","length","insertAdjacentHTML","$1KhuP","refresh","show","textContent","success","$8IJcu","viewedPhoto","totalHits","pageNumber","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","info","hide","error","$2c81a8fded229245$var$catchError","Error","console","log","addEventListener","event","preventDefault","innerHTML","query","currentTarget","elements","searchQuery","value","trim","warning","resetPage","resetViewedPhoto","fetchPhoto","then","catch","finally","reset","disabled","button","$l1Gdk","enable"],"version":3,"file":"gallery3.0b301747.js.map"}